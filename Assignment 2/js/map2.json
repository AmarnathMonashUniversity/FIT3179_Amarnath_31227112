{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json", 
    "title": "Countries that have Students entering Australia for higher studies",
    "width": 800,
    "height": 600,
    "params": [
        {
          "name": "Year_selection",
          "value": 2018,
          "bind": {
            "input": "range",
            "min": 2002,
            "max": 2021,
            "step": 1,
            "name": "Year:  "
          }
        }
      ],
    "projection": {"type": "equirectangular"},
    "data": {
    "url": "https://raw.githubusercontent.com/AmarnathMonashUniversity/FIT3179_Amarnath_31227112/main/Assignment%202/js/ne_world_110m.json",
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
            },
            "layer":[
              {
                "transform": [
                  {"calculate": "'Data is not available in ' + datum.properties.NAME", "as": "note"}
                ],
                "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
                "encoding": {
                  "tooltip": {
                    "field": "note"
                  }
                }
              },
              {
              "data": {
                "url": "https://raw.githubusercontent.com/AmarnathMonashUniversity/FIT3179_Amarnath_31227112/main/Assignment%202/data/Map_1.csv"
                      },
      "transform": [
        {
          "lookup": "Nationality",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/AmarnathMonashUniversity/FIT3179_Amarnath_31227112/main/Assignment%202/js/ne_world_110m.json",
              "format": {
                "type": "topojson",
                "feature": "ne_110m_admin_0_countries"
              }
                    },
            "key": "properties.NAME",
            "fields": [
                "2002",
                "2003",
                "2004",
                "2005",
                "2006",
                "2007",
                "2008",
                "2009",
                "2010",
                "2011",
                "2012",
                "2013",
                "2014",
                "2015",
                "2016",
                "2017",
                "2018",
                "2019",
                "2020",
                "2021"
            ]
                },
                "as": "geo"
        },
        {"calculate": "datum[Year_selection]", "as": "year"}
        
     ],
    "mark": {"type": "geoshape"},
    "encoding": {
      "color": {
        "field": "year",
        "title": "Quantity of Students",
        "type": "quantitative",
        "scale": {
          "type": "threshold",
          "domain": [500, 1000, 15000, 20000],
          "range": ["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"]
                 }
                },
      "tooltip": [
      {"field": "properties.NAME", "type": "nominal", "title": "Nationality"},
      {"field": "year", "type": "quantitative","title":"No. of students travelled to Australia"} 
      ]
                } 
            } 
                    ],
    "config": {}
  }